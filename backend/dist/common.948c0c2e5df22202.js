"use strict";(self.webpackChunkang=self.webpackChunkang||[]).push([[592],{55482:(g,i,r)=>{r.d(i,{a:()=>u});var a=r(41571),n=r(71932),s=r(93599);let u=(()=>{class t{constructor(e,l){this.authService=e,this.router=l,this.redirect={admin:"/dashboard"}}canActivate(e,l){let h=this.authService.getRole();if(["admin"].includes(h)||(localStorage.removeItem("client-token"),localStorage.removeItem("token"),localStorage.removeItem("data")),1==this.authService.isLoggedIn()){if("login"===e.routeConfig?.path||"register"===e.routeConfig?.path)return this.router.navigateByUrl("/dashboard"),!1;{let o=this.authService.getRole();return"admin"==o?"dashboard"===e.routeConfig?.path||(console.log(`Redirecting to ${this.redirect[o]}`),this.router.navigateByUrl(this.redirect[o]),!1):(localStorage.removeItem("client-token"),localStorage.removeItem("token"),localStorage.removeItem("data"),this.router.navigateByUrl("/poll"),!1)}}return"login"===e.routeConfig?.path||"register"===e.routeConfig?.path||(this.router.navigateByUrl("/poll"),!1)}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(n.s),a.LFG(s.F0))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);